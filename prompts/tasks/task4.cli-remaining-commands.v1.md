# CLIæ®‹ã‚Šã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…è¨ˆç”»

> **ğŸ”’ ã“ã®æ–‡ç« ã¯FIXEDã§ã™ (2025-11-04)**
> ä»¥é™ã®ä¿®æ­£ã¯æ³¨é‡ˆè¿½è¨˜ã®ã¿è¨±å¯ã•ã‚Œã¾ã™

**ä½œæˆæ—¥**: 2025-10-28
**ã‚¿ã‚¹ã‚¯ç•ªå·**: task4
**å‰æ**: Phase 1-2 (åŸºæœ¬æ§‹é€ ã€searchã‚³ãƒãƒ³ãƒ‰) å®Œäº†

## ç›®çš„

search-docs CLIãƒ„ãƒ¼ãƒ«ã®æ®‹ã‚Šã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆserver, index, configï¼‰ã‚’å®Ÿè£…ã™ã‚‹ã€‚

## ç¾çŠ¶

### å®Ÿè£…æ¸ˆã¿
- âœ… Phase 1: åŸºæœ¬æ§‹é€ ï¼ˆcommander.jsã€ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼‰
- âœ… Phase 2: searchã‚³ãƒãƒ³ãƒ‰ï¼ˆæ¤œç´¢æ©Ÿèƒ½ã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
- âœ… E2Eãƒ†ã‚¹ãƒˆï¼ˆã‚µãƒ¼ãƒèµ·å‹•ãƒ»æ¤œç´¢ã®çµ±åˆãƒ†ã‚¹ãƒˆï¼‰
- âœ… ãƒ†ã‚¹ãƒˆå‡ºåŠ›æŠ‘åˆ¶ï¼ˆTEST_VERBOSEç’°å¢ƒå¤‰æ•°ï¼‰

### æœªå®Ÿè£…
- âŒ Phase 3: serverã‚³ãƒãƒ³ãƒ‰ï¼ˆstart, stop, status, restartï¼‰
- âŒ Phase 4: indexã‚³ãƒãƒ³ãƒ‰ï¼ˆrebuild, status, cleanï¼‰
- âŒ Phase 5: configã‚³ãƒãƒ³ãƒ‰ï¼ˆinit, validate, showï¼‰

### ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
packages/cli/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ search-docs.ts          # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                # CLIå®šç¾©ï¼ˆæœªå®Ÿè£…ã‚³ãƒãƒ³ãƒ‰å«ã‚€ï¼‰
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â””â”€â”€ search.ts           # searchã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ output.ts           # å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”œâ”€â”€ __tests__/
â”‚   â””â”€â”€ e2e.test.ts             # E2Eãƒ†ã‚¹ãƒˆ
â””â”€â”€ vitest.config.ts            # ãƒ†ã‚¹ãƒˆè¨­å®š
```

## å®Ÿè£…è¨ˆç”»

### Phase 3: serverã‚³ãƒãƒ³ãƒ‰

ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã¨ã‚µãƒ¼ãƒåˆ¶å¾¡ã‚’å®Ÿè£…ã™ã‚‹ã€‚

#### 3.1 server start

**æ©Ÿèƒ½**:
- ã‚µãƒ¼ãƒãƒ—ãƒ­ã‚»ã‚¹ã‚’èµ·å‹•ï¼ˆãƒ‡ãƒ¼ãƒ¢ãƒ³ or ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
- PIDãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ï¼ˆ`.search-docs/server.pid`ï¼‰
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
- ãƒãƒ¼ãƒˆæŒ‡å®šãƒ»ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/server/start.ts`
- `src/utils/process.ts` (ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)
- `src/utils/pid.ts` (PIDãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†)

**æŠ€è¡“è¦ç´ **:
```typescript
import { spawn } from 'child_process';

// ãƒ‡ãƒ¼ãƒ¢ãƒ³èµ·å‹•
const serverProcess = spawn('node', [serverScript], {
  detached: true,      // è¦ªãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰åˆ‡ã‚Šé›¢ã—
  stdio: 'ignore',     // æ¨™æº–å…¥å‡ºåŠ›ã‚’ç„¡è¦–
  env: { SEARCH_DOCS_CONFIG: configPath },
});

// PIDãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
await savePidFile({
  pid: serverProcess.pid,
  startedAt: new Date().toISOString(),
  port: config.server.port,
  configPath: configPath,
});

serverProcess.unref();  // è¦ªãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†æ™‚ã«å­ã‚‚çµ‚äº†ã•ã›ãªã„
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
- `--config <path>`: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `.search-docs.json`ï¼‰
- `--port <port>`: ãƒãƒ¼ãƒˆç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 24280ï¼‰
- `--daemon, -d`: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•
- `--log <path>`: ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- æ—¢ã«ã‚µãƒ¼ãƒãŒèµ·å‹•ã—ã¦ã„ã‚‹å ´åˆ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ
- ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ

#### 3.2 server stop

**æ©Ÿèƒ½**:
- PIDãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹IDã‚’èª­ã¿è¾¼ã¿
- SIGTERMã‚·ã‚°ãƒŠãƒ«ã§åœæ­¢
- åœæ­¢ç¢ºèªã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†
- PIDãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/server/stop.ts`

**æŠ€è¡“è¦ç´ **:
```typescript
const pidInfo = await readPidFile();
process.kill(pidInfo.pid, 'SIGTERM');

// åœæ­¢ç¢ºèªï¼ˆæœ€å¤§5ç§’å¾…æ©Ÿï¼‰
await waitForProcessExit(pidInfo.pid, 5000);

// PIDãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
await deletePidFile();
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- PIDãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆ
- ãƒ—ãƒ­ã‚»ã‚¹ãŒæ—¢ã«åœæ­¢ã—ã¦ã„ã‚‹å ´åˆ
- åœæ­¢ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆSIGKILLï¼‰

#### 3.3 server status

**æ©Ÿèƒ½**:
- PIDãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
- ãƒ—ãƒ­ã‚»ã‚¹ç”Ÿå­˜ç¢ºèª
- ã‚µãƒ¼ãƒãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆ/healthï¼‰
- ã‚µãƒ¼ãƒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾—ï¼ˆ/rpc â†’ getStatusï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/server/status.ts`

**å‡ºåŠ›ä¾‹**:
```
Server Status:
  Status: Running
  PID: 12345
  Started: 2025-10-28 15:00:00
  Port: 24280
  Config: /path/to/.search-docs.json

Index Status:
  Total Documents: 42
  Total Sections: 256
  Dirty Count: 3

Worker Status:
  Running: Yes
  Processing: 1
  Queue: 2
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- ã‚µãƒ¼ãƒãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆ
- ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¤±æ•—

#### 3.4 server restart

**æ©Ÿèƒ½**:
- server stop + server start ã®çµ„ã¿åˆã‚ã›

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/server/restart.ts`

### Phase 4: indexã‚³ãƒãƒ³ãƒ‰

ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã€‚

#### 4.1 index rebuild

**æ©Ÿèƒ½**:
- ã‚µãƒ¼ãƒã®rebuildIndex APIã‚’å‘¼ã³å‡ºã—
- é€²æ—è¡¨ç¤ºï¼ˆå‡¦ç†ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ•°ï¼‰
- æŒ‡å®šãƒ‘ã‚¹ã®ã¿å†æ§‹ç¯‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/index/rebuild.ts`

**æŠ€è¡“è¦ç´ **:
```typescript
const client = new SearchDocsClient({ baseUrl: serverUrl });
const response = await client.rebuildIndex({ paths });

console.log(`Rebuilt: ${response.documentsProcessed} documents`);
console.log(`Created: ${response.sectionsCreated} sections`);
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
- `--force`: Dirtyã§ãªãã¦ã‚‚å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- `--server <url>`: ã‚µãƒ¼ãƒURL

**å¼•æ•°**:
- `[paths...]`: å†æ§‹ç¯‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆçœç•¥æ™‚ã¯å…¨ä½“ï¼‰

#### 4.2 index status

**æ©Ÿèƒ½**:
- ã‚µãƒ¼ãƒã®getStatus APIã‚’å‘¼ã³å‡ºã—
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹çµ±è¨ˆã‚’è¡¨ç¤º

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/index/status.ts`

**å‡ºåŠ›ä¾‹**:
```
Index Status:
  Total Documents: 42
  Total Sections: 256
  Dirty Sections: 3

Recent Activity:
  Last Indexed: 2025-10-28 15:00:00
  Last Search: 2025-10-28 15:30:00
```

#### 4.3 index clean

**æ©Ÿèƒ½**:
- Dirtyã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å¼·åˆ¶ã‚¯ãƒªãƒ¼ãƒ³
- å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å®Ÿè¡Œ

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/index/clean.ts`

**å®Ÿè£…æ–¹é‡**:
- `rebuildIndex` APIã§å…¨ä½“ã‚’å†æ§‹ç¯‰
- ã¾ãŸã¯ç‰¹å®šã®Dirtyãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¿å†æ§‹ç¯‰

### Phase 5: configã‚³ãƒãƒ³ãƒ‰

è¨­å®šç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã€‚

#### 5.1 config init

**æ©Ÿèƒ½**:
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆï¼ˆ`.search-docs.json`ï¼‰
- å¯¾è©±çš„ãªè¨­å®šä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šæ›¸ãç¢ºèª

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/config/init.ts`
- `src/utils/config.ts` (è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ)

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š**:
```json
{
  "version": "1.0",
  "project": {
    "name": "my-project",
    "root": "."
  },
  "files": {
    "include": ["**/*.md"],
    "exclude": ["**/node_modules/**", "**/.git/**"],
    "ignoreGitignore": true
  },
  "indexing": {
    "maxTokensPerSection": 2000,
    "minTokensForSplit": 100,
    "maxDepth": 3,
    "vectorDimension": 256,
    "embeddingModel": "cl-nagoya/ruri-v3-30m"
  },
  "search": {
    "defaultLimit": 10,
    "maxLimit": 100,
    "includeCleanOnly": false
  },
  "server": {
    "host": "localhost",
    "port": 24280,
    "protocol": "json-rpc"
  },
  "storage": {
    "documentsPath": ".search-docs/documents",
    "indexPath": ".search-docs/index",
    "cachePath": ".search-docs/cache"
  },
  "watcher": {
    "enabled": true,
    "debounce": 1000,
    "ignored": ["**/node_modules/**", "**/.git/**"]
  },
  "worker": {
    "enabled": true,
    "interval": 5000,
    "maxConcurrent": 3
  }
}
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
- `--interactive, -i`: å¯¾è©±çš„ã«è¨­å®šã‚’ä½œæˆï¼ˆå¾Œå›ã—å¯ï¼‰
- `--force, -f`: æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ã

#### 5.2 config validate

**æ©Ÿèƒ½**:
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- JSONæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
- ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ï¼ˆConfigLoader.validateã‚’åˆ©ç”¨ï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/config/validate.ts`

**å‡ºåŠ›ä¾‹**:
```
âœ“ Configuration is valid
  - Project: my-project
  - Root: /path/to/project
  - Include patterns: 1
  - Server port: 24280
```

**ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ä¾‹**:
```
âœ— Configuration is invalid:
  - server.port must be a number
  - files.include must be an array
```

#### 5.3 config show

**æ©Ÿèƒ½**:
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’è¡¨ç¤º
- JSONå½¢å¼ã§å‡ºåŠ›
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹è¡¨ç¤º

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/commands/config/show.ts`

**å‡ºåŠ›ä¾‹**:
```
Configuration: /path/to/.search-docs.json

{
  "version": "1.0",
  "project": {
    "name": "my-project",
    ...
  }
}
```

## å®Ÿè£…é †åº

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…ï¼ˆå…±é€šï¼‰

å„ªå…ˆåº¦: é«˜

1. `src/utils/process.ts` - ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
   - ã‚µãƒ¼ãƒãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•
   - ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
   - ãƒ—ãƒ­ã‚»ã‚¹ç”Ÿå­˜ç¢ºèª
2. `src/utils/pid.ts` - PIDãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
   - PIDãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆãƒ»èª­ã¿è¾¼ã¿ãƒ»å‰Šé™¤
   - PIDãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼å®šç¾©
3. `src/utils/config.ts` - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šç”Ÿæˆ
   - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿æ›¸ã

### ã‚¹ãƒ†ãƒƒãƒ—2: serverã‚³ãƒãƒ³ãƒ‰å®Ÿè£…

å„ªå…ˆåº¦: é«˜ï¼ˆæœ€ã‚‚é‡è¦ãªæ©Ÿèƒ½ï¼‰

1. server startï¼ˆãƒ‡ãƒ¼ãƒ¢ãƒ³èµ·å‹•ãªã—ç‰ˆï¼‰
2. server stop
3. server status
4. server startï¼ˆãƒ‡ãƒ¼ãƒ¢ãƒ³èµ·å‹•å¯¾å¿œï¼‰
5. server restart
6. ãƒ†ã‚¹ãƒˆä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—3: configã‚³ãƒãƒ³ãƒ‰å®Ÿè£…

å„ªå…ˆåº¦: ä¸­ï¼ˆserverã‚³ãƒãƒ³ãƒ‰ã§å¿…è¦ï¼‰

1. config init
2. config validate
3. config show
4. ãƒ†ã‚¹ãƒˆä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—4: indexã‚³ãƒãƒ³ãƒ‰å®Ÿè£…

å„ªå…ˆåº¦: ä¸­

1. index status
2. index rebuild
3. index clean
4. ãƒ†ã‚¹ãƒˆä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—5: çµ±åˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å„ªå…ˆåº¦: ä½

1. å…¨ã‚³ãƒãƒ³ãƒ‰ã®å‹•ä½œç¢ºèª
2. ãƒ˜ãƒ«ãƒ—ãƒ†ã‚­ã‚¹ãƒˆæ•´å‚™
3. READMEæ›´æ–°
4. ä½¿ç”¨ä¾‹è¿½åŠ 

## æŠ€è¡“çš„è€ƒæ…®äº‹é …

### ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†

**ãƒ‡ãƒ¼ãƒ¢ãƒ³åŒ–ã®æ–¹æ³•**:
```typescript
// ãƒ‡ãƒ¼ãƒ¢ãƒ³èµ·å‹•
const child = spawn('node', [serverScript], {
  detached: true,     // è¦ªã‹ã‚‰åˆ‡ã‚Šé›¢ã™
  stdio: ['ignore', logFd, logFd],  // stdout/stderrã‚’ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¸
});
child.unref();        // è¦ªãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ã‚’å¾…ãŸãªã„
```

**ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**:
- Windows: `detached`ã®å‹•ä½œãŒç•°ãªã‚‹
- macOS/Linux: ã‚·ã‚°ãƒŠãƒ«å‡¦ç†ã«æ³¨æ„

### PIDãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

**å ´æ‰€**: `.search-docs/server.pid`

**å†…å®¹**:
```typescript
interface PidFileContent {
  pid: number;
  startedAt: string;  // ISO 8601
  port: number;
  configPath: string;
  logPath?: string;
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**å…±é€šæ–¹é‡**:
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªã§åˆ†ã‹ã‚Šã‚„ã™ã
- çµ‚äº†ã‚³ãƒ¼ãƒ‰: 0ï¼ˆæˆåŠŸï¼‰ã€1ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
- ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã¯`--verbose`ãƒ¢ãƒ¼ãƒ‰ã®ã¿

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**:
- å„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- PIDãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

**çµ±åˆãƒ†ã‚¹ãƒˆ**:
- serverã‚³ãƒãƒ³ãƒ‰ã®èµ·å‹•ãƒ»åœæ­¢
- indexã‚³ãƒãƒ³ãƒ‰ã®APIå‘¼ã³å‡ºã—
- configã‚³ãƒãƒ³ãƒ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

**E2Eãƒ†ã‚¹ãƒˆ**:
- æ—¢å­˜ã®E2Eãƒ†ã‚¹ãƒˆã‚’æ‹¡å¼µ
- server start â†’ search â†’ server stop ã®æµã‚Œ

## ãƒªã‚¹ã‚¯ç®¡ç†

### æŠ€è¡“çš„ãƒªã‚¹ã‚¯

1. **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã®è¤‡é›‘ã•**
   - ãƒªã‚¹ã‚¯: ãƒ‡ãƒ¼ãƒ¢ãƒ³åŒ–ã€PIDç®¡ç†ã®å®Ÿè£…ãŒè¤‡é›‘
   - å¯¾ç­–: æœ€å°é™ã®å®Ÿè£…ã‹ã‚‰é–‹å§‹ã€æ®µéšçš„ã«æ©Ÿèƒ½è¿½åŠ 

2. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**
   - ãƒªã‚¹ã‚¯: Windows/Mac/Linuxã§å‹•ä½œãŒç•°ãªã‚‹
   - å¯¾ç­–: Node.jsæ¨™æº–APIã‚’ä½¿ç”¨ã€å¿…è¦ã«å¿œã˜ã¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¤å®š

3. **PIDãƒ•ã‚¡ã‚¤ãƒ«ã®ç«¶åˆ**
   - ãƒªã‚¹ã‚¯: è¤‡æ•°ãƒ—ãƒ­ã‚»ã‚¹ãŒåŒæ™‚ã«èµ·å‹•ã•ã‚Œã‚‹
   - å¯¾ç­–: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ­ãƒƒã‚¯ã€ãƒ—ãƒ­ã‚»ã‚¹ç”Ÿå­˜ç¢ºèª

### å¯¾å¿œç­–

- å°ã•ãå®Ÿè£…ã—ã¦å‹•ä½œç¢ºèª
- å„ã‚³ãƒãƒ³ãƒ‰ã‚’ç‹¬ç«‹ã—ã¦å®Ÿè£…
- ãƒ†ã‚¹ãƒˆã‚’å¿…ãšä½œæˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ä¸å¯§ã«

## ä¾å­˜é–¢ä¿‚ã®è¿½åŠ 

ç¾çŠ¶ã§å¿…è¦ãªä¾å­˜é–¢ä¿‚ã¯æƒã£ã¦ã„ã‚‹ï¼š
- `commander`: CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `@search-docs/client`: ã‚µãƒ¼ãƒé€šä¿¡
- `@search-docs/types`: å‹å®šç¾©

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆå¾Œã§æ¤œè¨ï¼‰**:
- `chalk`: ã‚«ãƒ©ãƒ¼å‡ºåŠ›ï¼ˆstatusè¡¨ç¤ºã‚’è¦‹ã‚„ã™ãï¼‰
- `ora`: ã‚¹ãƒ”ãƒŠãƒ¼è¡¨ç¤ºï¼ˆå‡¦ç†ä¸­è¡¨ç¤ºï¼‰
- `inquirer`: å¯¾è©±çš„UIï¼ˆconfig init --interactiveï¼‰

## å®Œäº†æ¡ä»¶

### å„Phase

- [ ] Phase 3: serverã‚³ãƒãƒ³ãƒ‰
  - [ ] server start ãŒå‹•ä½œã™ã‚‹
  - [ ] server stop ãŒå‹•ä½œã™ã‚‹
  - [ ] server status ãŒå‹•ä½œã™ã‚‹
  - [ ] server restart ãŒå‹•ä½œã™ã‚‹
  - [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆé€šé

- [ ] Phase 4: indexã‚³ãƒãƒ³ãƒ‰
  - [ ] index rebuild ãŒå‹•ä½œã™ã‚‹
  - [ ] index status ãŒå‹•ä½œã™ã‚‹
  - [ ] index clean ãŒå‹•ä½œã™ã‚‹
  - [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆé€šé

- [ ] Phase 5: configã‚³ãƒãƒ³ãƒ‰
  - [ ] config init ãŒå‹•ä½œã™ã‚‹
  - [ ] config validate ãŒå‹•ä½œã™ã‚‹
  - [ ] config show ãŒå‹•ä½œã™ã‚‹
  - [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆé€šé

### å…¨ä½“

- [ ] å…¨ã‚³ãƒãƒ³ãƒ‰ãŒãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] å…¨ãƒ†ã‚¹ãƒˆé€šé
- [ ] å‹ãƒã‚§ãƒƒã‚¯ãƒ»linté€šé
- [ ] E2Eãƒ†ã‚¹ãƒˆæ‹¡å¼µ
- [ ] READMEæ›´æ–°

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å®Ÿè£…ã‹ã‚‰é–‹å§‹
2. å°ã•ãå®Ÿè£…ã—ã¦ãƒ†ã‚¹ãƒˆ
3. ã‚³ãƒŸãƒƒãƒˆï¼ˆæ©Ÿèƒ½å˜ä½ï¼‰
4. Phase 3 â†’ Phase 5 â†’ Phase 4 ã®é †ã§å®Ÿè£…

---

**ä½œæˆæ—¥**: 2025-10-28
**æœ€çµ‚æ›´æ–°**: 2025-10-28
**çŠ¶æ…‹**: è¨ˆç”»ä½œæˆå®Œäº†ã€å®Ÿè£…é–‹å§‹å¾…ã¡
**æ¨å®šå·¥æ•°**: Phase 3ï¼ˆ4-6æ™‚é–“ï¼‰ã€Phase 4ï¼ˆ2-3æ™‚é–“ï¼‰ã€Phase 5ï¼ˆ2-3æ™‚é–“ï¼‰
